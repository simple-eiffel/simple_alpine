<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_alpine Mock App</title>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/focus@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
        .dark-mode { background-color: #1a202c; color: #f7fafc; }
        .dark-mode .modal-content { background-color: #2d3748; color: #f7fafc; }
        .dark-mode .bg-gray-200 { background-color: #4a5568; color: #f7fafc; }
        .dark-mode .bg-white { background-color: #2d3748; color: #f7fafc; }
        .dark-mode .hover\:bg-gray-100:hover { background-color: #4a5568; }
        .dark-mode .border { border-color: #4a5568; }
        /* Dark mode for info boxes */
        .dark-mode .bg-blue-50 { background-color: #1e3a5f; }
        .dark-mode .border-blue-400 { border-color: #60a5fa; }
        .dark-mode .text-blue-800 { color: #93c5fd; }
        .dark-mode .text-blue-700 { color: #bfdbfe; }
        .dark-mode .text-blue-600 { color: #93c5fd; }
        /* Dark mode for gray text */
        .dark-mode .text-gray-600 { color: #9ca3af; }
        .dark-mode .text-gray-500 { color: #9ca3af; }
        /* Dark mode for form elements */
        .dark-mode .bg-gray-100 { background-color: #374151; color: #f3f4f6; }
        .dark-mode .bg-gray-50 { background-color: #374151; color: #f3f4f6; }
        .dark-mode input, .dark-mode select, .dark-mode textarea {
            background-color: #374151;
            color: #f3f4f6;
            border-color: #4b5563;
        }
    </style>
</head>
<body class="p-8 transition-colors duration-200" x-data="{ dark: false }" x-init="dark = localStorage.getItem('darkMode') === 'true'" x-effect="localStorage.setItem('darkMode', dark)" :class="{ 'dark-mode': dark }">
    <h1 class="text-3xl font-bold mb-2">simple_alpine Components</h1>
    <p class="text-gray-600 mb-8">Interactive demonstrations of Alpine.js directives generated by the simple_alpine Eiffel library.</p>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">1. Dark Mode Toggle</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click the button to toggle between light and dark mode</li>
                <li>The entire page background and text colors will change</li>
                <li>Your preference is saved to localStorage and persists on refresh</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-init, x-effect, @click, x-text, :class</p>
        </div>
        <button class="px-4 py-2 rounded bg-gray-200" @click="dark = !dark" x-text="dark ? 'Switch to Light' : 'Switch to Dark'"></button>
    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">2. Dropdown Menu</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click "Menu" to open a dropdown with three options</li>
                <li>Click outside the menu to close it</li>
                <li>Press Escape key to close it</li>
                <li>The menu animates in/out with x-transition</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-show, @click, @click.outside, @keydown.escape, x-transition</p>
        </div><div class="relative inline-block" x-data="{ open: false }"><button class="px-4 py-2 bg-blue-500 text-white rounded" @click="open = !open">Menu</button><div class="absolute mt-2 w-48 bg-white rounded shadow-lg" x-transition="" x-show="open" @click.outside="open = false" @keydown.escape="open = false"><div class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Profile</div><div class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Settings</div><div class="px-4 py-2 hover:bg-gray-100 cursor-pointer">Logout</div></div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">3. Modal Dialog</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click "Open Modal" to show a centered dialog with backdrop</li>
                <li>Focus is trapped inside the modal (Tab cycles through modal elements only)</li>
                <li>Click the backdrop or Close button to dismiss</li>
                <li>Press Escape to close</li>
                <li>Backdrop fades in/out with opacity transition</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-show, @click, @click.stop, @keydown.escape, x-trap, x-transition.opacity</p>
        </div><div x-data="{ open: false }"><button class="px-4 py-2 bg-green-500 text-white rounded" @click="open = true">Open Modal</button><div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" x-transition.opacity="" x-show="open" @click="open = false" @keydown.escape="open = false"><div class="bg-white p-6 rounded-lg shadow-xl max-w-md mx-auto" @click.stop="" x-trap="open"><div class="text-xl font-bold mb-4">Modal Title</div><div class="mb-4">This is the modal content. It can contain any HTML.</div><div class="flex justify-end"><button class="px-4 py-2 bg-gray-500 text-white rounded" @click="open = false">Close</button></div></div></div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">4. Tabs</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click any tab (Home, Profile, Settings) to switch content</li>
                <li>Active tab shows blue underline indicator</li>
                <li>Content panels show/hide based on selection</li>
                <li>Only one panel visible at a time</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-show, @click, :class (conditional classes)</p>
        </div><div x-data="{ activeTab: 'home' }"><div class="flex border-b"><button class="px-4 py-2" @click="activeTab = 'home'" :class="{ 'border-b-2 border-blue-500': activeTab === 'home' }">Home</button><button class="px-4 py-2" @click="activeTab = 'profile'" :class="{ 'border-b-2 border-blue-500': activeTab === 'profile' }">Profile</button><button class="px-4 py-2" @click="activeTab = 'settings'" :class="{ 'border-b-2 border-blue-500': activeTab === 'settings' }">Settings</button></div><div class="p-4" x-show="activeTab === 'home'">Welcome to the home tab!</div><div class="p-4" x-show="activeTab === 'profile'">This is your profile information.</div><div class="p-4" x-show="activeTab === 'settings'">Configure your settings here.</div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">5. Accordion</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click section headers to expand/collapse content</li>
                <li>Content animates with smooth height transition (x-collapse plugin)</li>
                <li>Multiple sections can be open simultaneously</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-show, @click, x-collapse (plugin)</p>
        </div><div class="border rounded" x-data="{ activeIndex: null }"><div class="border-b"><div><button class="w-full text-left px-4 py-2 bg-gray-200" @click="activeIndex = activeIndex === 0 ? null : 0">Section 1</button></div><div class="px-4 py-2" x-collapse="" x-show="activeIndex === 0">Content for section 1. This collapses smoothly.</div></div><div class="border-b"><div><button class="w-full text-left px-4 py-2 bg-gray-200" @click="activeIndex = activeIndex === 1 ? null : 1">Section 2</button></div><div class="px-4 py-2" x-collapse="" x-show="activeIndex === 1">Content for section 2. Also collapses smoothly.</div></div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">6. Counter</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click "-" to decrement the count</li>
                <li>Click "+" to increment the count</li>
                <li>The number updates instantly (reactive state)</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-text, @click</p>
        </div><div class="flex items-center gap-2" x-data="{ count: 0 }"><button class="px-3 py-1 bg-red-500 text-white rounded" @click="count--">-</button><span class="px-4 text-xl font-bold" x-text="count"></span><button class="px-3 py-1 bg-green-500 text-white rounded" @click="count++">+</button></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">7. HTMX + Alpine Combo</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click "Load Data" to trigger an HTMX request</li>
                <li>Button becomes disabled and shows loading state (opacity change)</li>
                <li>Alpine manages the loading UI while HTMX handles the server request</li>
                <li><em>Note: Request will fail without a server - this demonstrates the integration pattern</em></li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, @click, :disabled, :class + HTMX: hx-get, hx-target, hx-swap</p>
        </div><button class="px-4 py-2 bg-blue-500 text-white rounded" hx-get="/api/data" hx-target="#result" hx-swap="innerHTML" hx-on::after-request="loading = false" x-data="{ loading: false }" @click="loading = true" :disabled="loading" :class="{ 'opacity-50 cursor-wait': loading }">Load Data</button>        <div id="result" class="mt-4 p-4 border rounded min-h-16 text-gray-500 italic">Results will appear here after HTMX request...</div>
    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">8. Form with x-model Binding</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li><strong>Name:</strong> Type to see instant updates in Live Preview (x-model)</li>
                <li><strong>Email:</strong> Updates only on blur/change, not every keystroke (x-model.lazy)</li>
                <li><strong>Age:</strong> Automatically converts to number type (x-model.number)</li>
                <li><strong>Newsletter:</strong> Checkbox binding (boolean value)</li>
                <li><strong>Country:</strong> Select dropdown binding</li>
                <li><strong>Bio:</strong> Updates after 500ms pause in typing (x-model.debounce)</li>
                <li>Click Submit to see all form data in an alert</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-model, x-model.lazy, x-model.number, x-model.debounce, x-cloak, @submit.prevent</p>
        </div><div class="max-w-md" x-data="{ name: '', email: '', age: 0, newsletter: false, country: 'us', bio: '' }"><form @submit.prevent=""><label class="block text-sm font-medium mb-1">Name:</label><input class="w-full border rounded px-3 py-2 mb-3" type="text" name="name" x-model="name"/><label class="block text-sm font-medium mb-1">Email (lazy):</label><input class="w-full border rounded px-3 py-2 mb-3" type="email" name="email" x-model.lazy="email"/><label class="block text-sm font-medium mb-1">Age (number):</label><input class="w-full border rounded px-3 py-2 mb-3" type="number" name="age" x-model.number="age"/><label class="flex items-center gap-2 mb-3"><input class="w-4 h-4" type="checkbox" name="newsletter" x-model="newsletter"/></label><label class="block text-sm font-medium mb-1">Country:</label><select class="w-full border rounded px-3 py-2 mb-3" name="country" x-model="country"><option value="us">United States</option><option value="uk">United Kingdom</option><option value="ca">Canada</option></select><label class="block text-sm font-medium mb-1">Bio (debounce 500ms):</label><textarea class="w-full border rounded px-3 py-2 mb-3" name="bio" rows="3" x-model.debounce.500ms="bio"></textarea><button class="px-4 py-2 bg-blue-500 text-white rounded" type="button" @click="alert('Form data: ' + JSON.stringify({name, email, age, newsletter, country, bio}))">Submit</button></form><div class="mt-4 p-3 bg-gray-100 rounded text-sm" x-cloak=""><strong>Live Preview:</strong><br><span x-text="'Name: ' + name"></span><br><span x-text="'Email: ' + email"></span><br><span x-text="'Age: ' + age + ' (type: ' + typeof age + ')'"></span><br><span x-text="'Newsletter: ' + newsletter"></span><br><span x-text="'Country: ' + country"></span><br><span x-text="'Bio: ' + bio"></span></div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">9. Dynamic List with x-for</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Type text and press Enter or click Add to create new items</li>
                <li>Click the red X button to remove any item</li>
                <li>List updates reactively as items are added/removed</li>
                <li>Item count updates automatically</li>
                <li>Empty state message shows when list is empty</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-for, x-model, x-show, @click, @keydown.enter, :key, template</p>
        </div><div x-data="{ items: ['First item', 'Second item'], newItem: '' }"><input class="border rounded px-3 py-2 mr-2" type="text" name="newItem" placeholder="Enter item and press Enter" x-model="newItem" @keydown.enter="if(newItem.trim()) { items.push(newItem.trim()); newItem = '' }"/><button class="px-4 py-2 bg-green-500 text-white rounded" @click="if(newItem.trim()) { items.push(newItem.trim()); newItem = '' }">Add</button><div class="mt-4"><template x-for="(item, index) in items"><div class="flex items-center justify-between p-2 bg-gray-50 rounded mb-1" x-bind:key="index"><button class="ml-2 text-red-500 hover:text-red-700" @click="items.splice(index, 1)">×</button></div></template></div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">10. Element References with x-ref</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li><strong>Focus:</strong> Click to move cursor into the input field</li>
                <li><strong>Select All:</strong> Click to highlight all text in the input</li>
                <li><strong>Clear:</strong> Click to empty the input field</li>
                <li>These work by referencing the input element via $refs.myInput</li>
                <li>Check browser console for $el reference log on page load</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-ref, x-init, @click with $refs and $el magic properties</p>
        </div><div x-data=""><input class="border rounded px-3 py-2 mr-2 w-64" type="text" name="refDemo" placeholder="Click buttons to interact with me" x-ref="myInput"/><button class="px-3 py-2 bg-blue-500 text-white rounded mr-2" @click="$refs.myInput.focus()">Focus</button><button class="px-3 py-2 bg-purple-500 text-white rounded mr-2" @click="$refs.myInput.select()">Select All</button><button class="px-3 py-2 bg-red-500 text-white rounded" @click="$refs.myInput.value = ''">Clear</button><div class="mt-4 p-3 bg-gray-100 rounded text-sm" x-data="" x-init="console.log('Output element:', $el)">Check console for $el reference log</div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">11. Custom Events with $dispatch</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li><strong>Send Simple Event:</strong> Dispatches "custom-event" - log shows timestamp</li>
                <li><strong>Send Event with Data:</strong> Dispatches "data-event" with message and timestamp payload</li>
                <li>Events bubble up and are caught by x-on listeners</li>
                <li>Event log displays all received events</li>
                <li>Click Clear Log to reset</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, @click with $dispatch(), x-on:custom-event, x-on:data-event, x-for, x-show</p>
        </div><div x-data="{ log: [] }"><div class="mb-4"><button class="px-4 py-2 bg-blue-500 text-white rounded mr-2" @click="$dispatch('custom-event')">Send Simple Event</button><button class="px-4 py-2 bg-green-500 text-white rounded mr-2" @click="$dispatch('data-event', { message: 'Hello!', timestamp: Date.now() })">Send Event with Data</button><button class="px-4 py-2 bg-gray-500 text-white rounded" @click="log = []">Clear Log</button></div><div x-on:custom-event="log.push('Received: custom-event at ' + new Date().toLocaleTimeString())" x-on:data-event="log.push('Received: data-event - ' + JSON.stringify($event.detail))"><div class="p-4 bg-gray-100 rounded min-h-24"><div x-show="log.length === 0" class="text-gray-500 italic">Event log empty. Click buttons above.</div><template x-for="(entry, i) in log" :key="i"><div class="text-sm mb-1" x-text="entry"></div></template></div></div></div>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">12. Navigation with Semantic Elements</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Click any nav link (Home, About, Services, Contact)</li>
                <li>Active link shows bold blue text</li>
                <li>Inactive links show gray with blue hover effect</li>
                <li>Current page indicator updates below the nav</li>
                <li>Links use @click.prevent for SPA-style navigation (no page reload)</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, @click.prevent, :href, :class, x-text + semantic elements: nav, ul, li, a</p>
        </div><nav class="p-4 bg-gray-50 rounded" aria-label="Main navigation" x-data="{ currentPage: 'home' }"><ul class="flex gap-6"><li><a href="#" :href="'#' + currentPage" :class="{ 'font-bold text-blue-600': currentPage === 'home', 'text-gray-600 hover:text-blue-500': currentPage !== 'home' }" @click.prevent="currentPage = 'home'">Home</a></li><li><a href="#" :href="'#' + currentPage" :class="{ 'font-bold text-blue-600': currentPage === 'about', 'text-gray-600 hover:text-blue-500': currentPage !== 'about' }" @click.prevent="currentPage = 'about'">About</a></li><li><a href="#" :href="'#' + currentPage" :class="{ 'font-bold text-blue-600': currentPage === 'services', 'text-gray-600 hover:text-blue-500': currentPage !== 'services' }" @click.prevent="currentPage = 'services'">Services</a></li><li><a href="#" :href="'#' + currentPage" :class="{ 'font-bold text-blue-600': currentPage === 'contact', 'text-gray-600 hover:text-blue-500': currentPage !== 'contact' }" @click.prevent="currentPage = 'contact'">Contact</a></li></ul></nav>    </section>

    <section class="mb-10 p-6 border rounded-lg">
        <h2 class="text-xl font-semibold mb-2">13. Intersection Observer with x-intersect</h2>
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
            <p class="font-medium text-blue-800">What to expect:</p>
            <ul class="list-disc ml-6 text-blue-700 text-sm mt-1">
                <li>Scroll down within this section to see the colored boxes</li>
                <li><strong>Blue box:</strong> Animates up when entering viewport (x-intersect:enter)</li>
                <li><strong>Green box:</strong> Shows "Loaded!" once when first seen (x-intersect.once) - check console</li>
                <li><strong>Purple/Gray box:</strong> Changes color based on visibility (x-intersect:enter/leave)</li>
                <li>Scroll up and down to see the purple box toggle between IN VIEW and OUT OF VIEW</li>
            </ul>
            <p class="text-xs text-blue-600 mt-2"><strong>Directives used:</strong> x-data, x-intersect:enter, x-intersect:leave, x-intersect.once, :class, x-text (plugin)</p>
        </div><div><div class="h-32 flex items-center justify-center text-gray-400">↓ Scroll down to see intersection observer in action ↓</div><div class="p-6 bg-blue-500 text-white rounded transition-all duration-500 mb-4" x-data="{ visible: false }" x-intersect:enter="visible = true" :class="{ 'opacity-100 translate-y-0': visible, 'opacity-0 translate-y-8': !visible }">x-intersect:enter - I animate when entering viewport</div><div class="p-6 bg-green-500 text-white rounded mb-4" x-data="{ loaded: false }" x-intersect.once="loaded = true; console.log('Loaded once!')"><span x-text="loaded ? 'x-intersect.once - Loaded! (check console)' : 'x-intersect.once - Waiting...'"></span></div><div class="p-6 text-white rounded transition-colors duration-300" x-data="{ inView: false }" x-intersect:enter="inView = true" x-intersect:leave="inView = false" :class="{ 'bg-purple-500': inView, 'bg-gray-400': !inView }"><span x-text="inView ? 'x-intersect:enter/leave - IN VIEW' : 'x-intersect:enter/leave - OUT OF VIEW'"></span></div></div>    </section>

    <footer class="mt-12 pt-8 border-t text-center text-gray-500 text-sm">
        <p>Generated by <strong>simple_alpine</strong> - An Eiffel library for Alpine.js</p>
        <p class="mt-1">Alpine.js directives are type-safe and fluent in Eiffel code</p>
    </footer>
</body>
</html>